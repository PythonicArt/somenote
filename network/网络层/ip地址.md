接入网络的设备应该具有一个全球唯一地地址， 来做位置的识别

ip地址由两部分组成

网络号 主机号
同一网络内的ip地址都相同

路由器通过网络号来转发数据, 一个路由器的条目, 就是网络号和对应的出口

同一网络内的数据通讯可以直接交付

不同网络内的通信， 通过连接多个网络的路由器进行间接交付， 即交给出口的路由器转发出去，收数据时通过这个路由器转发到具体的主机

一个主机可能会同时处于多个网络， 具有多个网络地址, 比如连接多个网络的路由器

总共32位
五类地址


ip地址与硬件地址的区别
1. ip地址是网络层及以上使用的地址， 是一种逻辑的划分, 使用软件实现的， 同一个主机可能会拥有不同的ip地址
2. 硬件地址是数据链路层和物理层使用的地址， 固化在网卡的rom中， 也叫MAC地址

同一网络的通信， 通过mac地址在数据链路层就可以交付

不同网络的通信， 通过交付到中间的路由器， 再转发到其他网络
路由器通过不同的端口 连接不同的网络， 每一个端口都相当于一个网卡， 都有自己的mac地址， 也有位于网络中的ip地址

arp地址转换协议

同一网络中， ip与mac地址的转换, 即发现目的ip地址和自己是同一网络之后， 通过这个协议找到目的mac地址， 通过底层直接交付

协议流程
维护一个缓存， 保存ip-mac地址的映射
当找不到的时候

1. 广播查询
    向网络内所有主机进行广播， 查询ipB的mac地址
    请求数据中包含自己的ip地址 ipA， 和mac地址 macA
    这样做的理由是，刷新地址， 避免B再重新请求A的地址信息

2. 当收到请求的主机发现是查询自己的地址时， 收下请求，
    将请求中的源地址信息， 写入自己的缓存表中, 以最新的为准
    将自己的地址信息 单播 的方式 回给 ipA的主机
    而其他不匹配的主机则丢弃该查询分组

3. 收到响应之后， ipA的主机将数据写入缓存表

时效性
由于网络是动态变化的， 可能会删减主机， 或是变换地址
当发生变化的时候， 不立即更新， 而是让旧的数据保留一段时间， 在这段时间内， 主机会按照旧的地址传送数据
设置一个生存时间, 当生存时间到达， 缓存清空，重新请求数据， 此时获得最新的地址信息


为什么不直接通过mac地址交互, 而需要频繁地进行ip-mac的索引转换呢 ?

这样需要将整个网络的设备当做一个整体考虑， 过于复杂和庞大， 不管是查询或是更新都是及其耗费时间的
通过网络来独立进行地址转换， 相当于逐一的简化问题
